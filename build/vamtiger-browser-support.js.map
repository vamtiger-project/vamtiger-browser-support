{"version":3,"file":"vamtiger-browser-support.js","sources":["../node_modules/vamtiger-browser-method/node_modules/tslib/tslib.js","../node_modules/vamtiger-browser-method/source/types.ts","../node_modules/vamtiger-browser-method/source/load-ts-lib.ts","../node_modules/vamtiger-browser-method/source/load-script.ts","../source/types.ts","../source/config.ts","../source/get-support-urls.ts","../source/load-scripts.ts","../source/load-support.ts","../source/load-next-support.ts","../source/update-browser-support.ts","../source/set-meta-element.ts","../source/set-browser-support-meta-element.ts","../source/set-browser-support-meta-elements.ts","../source/is-browser.ts","../source/vamtiger-browser-support.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global global, define, System, Reflect, Promise */\r\nvar __extends;\r\nvar __assign;\r\nvar __rest;\r\nvar __decorate;\r\nvar __param;\r\nvar __metadata;\r\nvar __awaiter;\r\nvar __generator;\r\nvar __exportStar;\r\nvar __values;\r\nvar __read;\r\nvar __spread;\r\nvar __await;\r\nvar __asyncGenerator;\r\nvar __asyncDelegator;\r\nvar __asyncValues;\r\nvar __makeTemplateObject;\r\nvar __importStar;\r\nvar __importDefault;\r\n(function (factory) {\r\n    var root = typeof global === \"object\" ? global : typeof self === \"object\" ? self : typeof this === \"object\" ? this : {};\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"tslib\", [\"exports\"], function (exports) { factory(createExporter(root, createExporter(exports))); });\r\n    }\r\n    else if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        factory(createExporter(root, createExporter(module.exports)));\r\n    }\r\n    else {\r\n        factory(createExporter(root));\r\n    }\r\n    function createExporter(exports, previous) {\r\n        if (exports !== root) {\r\n            if (typeof Object.create === \"function\") {\r\n                Object.defineProperty(exports, \"__esModule\", { value: true });\r\n            }\r\n            else {\r\n                exports.__esModule = true;\r\n            }\r\n        }\r\n        return function (id, v) { return exports[id] = previous ? previous(id, v) : v; };\r\n    }\r\n})\r\n(function (exporter) {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\n    __extends = function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n\r\n    __assign = Object.assign || function (t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n\r\n    __rest = function (s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n                t[p[i]] = s[p[i]];\r\n        return t;\r\n    };\r\n\r\n    __decorate = function (decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    };\r\n\r\n    __param = function (paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    };\r\n\r\n    __metadata = function (metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    };\r\n\r\n    __awaiter = function (thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    };\r\n\r\n    __generator = function (thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    };\r\n\r\n    __exportStar = function (m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    };\r\n\r\n    __values = function (o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    };\r\n\r\n    __read = function (o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    };\r\n\r\n    __spread = function () {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    };\r\n\r\n    __await = function (v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    };\r\n\r\n    __asyncGenerator = function (thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    };\r\n\r\n    __asyncDelegator = function (o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    };\r\n\r\n    __asyncValues = function (o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    };\r\n\r\n    __makeTemplateObject = function (cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    __importStar = function (mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result[\"default\"] = mod;\r\n        return result;\r\n    };\r\n\r\n    __importDefault = function (mod) {\r\n        return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n    };\r\n\r\n    exporter(\"__extends\", __extends);\r\n    exporter(\"__assign\", __assign);\r\n    exporter(\"__rest\", __rest);\r\n    exporter(\"__decorate\", __decorate);\r\n    exporter(\"__param\", __param);\r\n    exporter(\"__metadata\", __metadata);\r\n    exporter(\"__awaiter\", __awaiter);\r\n    exporter(\"__generator\", __generator);\r\n    exporter(\"__exportStar\", __exportStar);\r\n    exporter(\"__values\", __values);\r\n    exporter(\"__read\", __read);\r\n    exporter(\"__spread\", __spread);\r\n    exporter(\"__await\", __await);\r\n    exporter(\"__asyncGenerator\", __asyncGenerator);\r\n    exporter(\"__asyncDelegator\", __asyncDelegator);\r\n    exporter(\"__asyncValues\", __asyncValues);\r\n    exporter(\"__makeTemplateObject\", __makeTemplateObject);\r\n    exporter(\"__importStar\", __importStar);\r\n    exporter(\"__importDefault\", __importDefault);\r\n});\r\n","import * as tslib from '../node_modules/tslib/tslib';\nimport defineCustomElement from './define-custom-element';\n\nexport enum ScriptType {\n    jsonld = 'application/ld+json'\n}\n\nexport enum ScriptAttribute {\n    type = 'type'\n}\n\nexport enum ErrorMessage {\n    failedToLoadScript = 'Failed to load script',\n    windowPropertyNotSet = 'Window property not set',\n    unsupportedFeature = 'Unsupported feature',\n    customElementAreadyDefined = 'Custom element already defined'\n}\n\nexport enum StringConstant {\n    slash = '/'\n}\n\nexport enum LinkRel {\n    stylesheet = 'stylesheet'\n}\n\nexport enum LoadScriptElement {\n    script = 'script',\n    link = 'link',\n    style = 'style'\n}\n\nexport enum Selector {\n    lastStylesheet = 'style:last-of-type',\n    webcomponentsjs = 'script[src*=\"@webcomponents\\/webcomponentsjs\"]'\n}\n\nexport interface ILoadRemoteScriptParams {\n    src: string;\n}\n\nexport interface ILoadRemoteStylesheetScriptParams {\n    href: string;\n}\n\nexport interface ILoadLocalScriptParams {\n    name: string;\n}\n\nexport interface ILoadScriptParams {\n    js: string;\n    jsonld?: boolean;\n}\n\nexport interface ILoadStylesheetScriptParams {\n    css: string;\n}\n\nexport interface ILoadScript {\n    params: LocalScriptParams\n        | LocalStylesheetScriptParams\n        | ILoadRemoteScriptParams\n        | ILoadRemoteStylesheetScriptParams;\n    reject: (error: Error) => void\n}\n\nexport interface ILoadShadowStylesheet {\n    css: string;\n    element: HTMLElement;\n}\n\nexport interface IDefineCustomElement {\n    name: string;\n    constructor: {\n        new (): HTMLElement\n        prototype: HTMLElement;\n    };\n    ignore?: boolean;\n}\n\nexport interface IPause {\n    milliseconds: number;\n}\n\nexport type TsLibType = typeof tslib;\n\nexport type TsLibKey = keyof TsLibType;\n\nexport type TsLib = {\n    [K in TsLibKey]: TsLibType[K]\n}\n\nexport type LocalScriptParams = ILoadLocalScriptParams & ILoadScriptParams;\n\nexport type LocalStylesheetScriptParams = ILoadLocalScriptParams & ILoadStylesheetScriptParams;\n\nexport type LoadedScript<P extends ILoadScript['params']> =\n    P extends ILoadScriptParams ? HTMLScriptElement :\n    P extends ILoadStylesheetScriptParams ? HTMLStyleElement :\n    P extends ILoadRemoteScriptParams ? HTMLScriptElement :\n    P extends ILoadRemoteStylesheetScriptParams ? HTMLLinkElement :\n    never;\n\ndeclare global {\n    interface Window extends TsLib {\n        VamtigerBrowserMethod: {\n            loadScript: <P extends ILoadScript['params']>(params: P) => Promise<LoadedScript<P>>;\n            defineCustomElement: (params: IDefineCustomElement) => void;\n        }\n    }\n\n    namespace NodeJS {\n        interface  Global {\n            VamtigerBrowserMethod: Window['VamtigerBrowserMethod'];\n        }\n    }\n}","import * as tslib from '../node_modules/tslib/tslib';\nimport { TsLibKey } from './types';\n\nconst tsLibKeys = Object.keys(tslib) as TsLibKey[];\n\ntsLibKeys.forEach(key => {\n    if (!window[key]) {\n        window[key] = tslib[key];\n    }\n});","import {\n    ILoadScript,\n    ErrorMessage,\n    LocalScriptParams,\n    LocalStylesheetScriptParams,\n    ILoadRemoteStylesheetScriptParams,\n    ILoadRemoteScriptParams,\n    LoadScriptElement,\n    LoadedScript,\n    LinkRel,\n    ScriptAttribute,\n    ScriptType\n} from './types';\n\nconst { failedToLoadScript } = ErrorMessage;\nconst { stylesheet } = LinkRel;\nconst { script: scriptElement, link, style } = LoadScriptElement;\n\nexport default <P extends ILoadScript['params']>(params: P) => new Promise((resolve: (script: LoadedScript<P>) => void, reject: ILoadScript['reject']) => {\n    const { head, body } = document;\n    const { js, name: scriptName, jsonld } = params as LocalScriptParams;\n    const { src } = params as ILoadRemoteScriptParams;\n    const { css, name: stylesheetName } = params as LocalStylesheetScriptParams;\n    const { href } = params as ILoadRemoteStylesheetScriptParams;\n    const remoteScript = params.hasOwnProperty('src') || params.hasOwnProperty('href');\n    const element = (js || src) && scriptElement\n        || css && style\n        || href && link;\n    const selector = src && `script[src=\"${src}\"]`\n        || href && `link[href=\"${href}\"]`\n        || js && scriptName && `script[data-name=\"${scriptName}\"]`\n        || css && stylesheetName && `style[data-name=\"${stylesheetName}\"]`;\n    const existingScript = (head.querySelector(selector) || body.querySelector(selector)) as LoadedScript<P>;\n    const script = selector\n        && element\n        && document.createElement(element) as LoadedScript<P>;\n\n    if (script instanceof HTMLScriptElement) {\n        if (src) {\n            script.src = src;\n        } else if (js) {\n            script.innerHTML = js;\n            script.dataset.name = scriptName;\n\n            if (jsonld) {\n                script.setAttribute(ScriptAttribute.type, ScriptType.jsonld);\n            }\n        }\n    } else if (script instanceof HTMLLinkElement) {\n        script.rel = stylesheet;\n        script.href = href;\n    } else if (script instanceof HTMLStyleElement) {\n        script.innerHTML = css;\n        script.dataset.name = stylesheetName;\n    }\n\n    if (existingScript) {\n        resolve(existingScript);\n    } else if (script) {\n        head.appendChild(script);\n\n        if (remoteScript) {\n            script.addEventListener('load', handleLoad);\n            script.addEventListener('error', handleLoadError);\n        } else {\n            resolve(script);\n        }\n    }\n\n    function handleLoad(event: Event) {\n        if (script) {\n            script.removeEventListener('load', handleLoad);\n\n            resolve(script);\n        }\n    }\n\n    function handleLoadError(event: Event) {\n        if (script) {\n            script.removeEventListener('error', handleLoadError);\n        }\n\n        console.error(event);\n\n        reject(new Error(`${failedToLoadScript}`));\n    }\n});","export enum StringConstant {\n    nothing = '',\n    vamtiger = 'vamtiger',\n    slash = '/',\n    jsExtension = '.js',\n    bashAnd = '&&'\n}\n\nexport enum ElmentName {\n    meta = 'meta',\n    script = 'script'\n}\n\nexport enum ElementId {\n    vamtigerBrowserSupport = 'vamtiger-browser-support'\n}\n\nexport enum ElementAttribute {\n    id = 'id'\n}\n\nexport enum MetaElementAttribute {\n    baseUrl = 'baseUrl',\n    name = 'name',\n    url = 'url',\n    primary = 'primary',\n    loaded = 'loaded',\n    supported = 'supported',\n    unsupported = 'unsupported',\n    error = 'error',\n    polyfill = 'polyfill',\n    loadCritical = 'loadCritical',\n    load = 'load'\n}\n\nexport enum MetaElementBrowserSupportAttribute {\n    es2015Support = 'data-es2015-support',\n    elementQuerySupport = 'data-element-query-support',\n    webComponentSupport = 'data-web-component-support',\n    fetchSupport = 'data-fetch-support'\n}\n\nexport enum Selector {\n    vamtigerBrowserSupportScript = 'script[src*=\"vamtiger-browser-support\"]'\n}\n\nexport enum ErrorMessage {\n    notBrowser = 'This is not a web browser'\n}\n\nexport enum NpmScript {\n    bundleSource = 'bundle-source'\n}\n\nexport enum SupportType {\n    primary = 'primary',\n    secondary = 'secondary'\n}\n\nexport enum LoadOnComplete {\n    loadCritical = 'loadCritical',\n    load = 'load'\n}\n\nexport type LoadOnCompleteType  = keyof typeof LoadOnComplete;\n\nexport type Support = keyof typeof MetaElementBrowserSupportAttribute;\n\nexport type SupportTypeKey = keyof typeof SupportType;\n\nexport type StringObject = {[key: string]: string};\n\nexport type AnyObject = {[key: string]: any};\n\nexport type VamtigerSupportFile = 'vamtiger-es2015-support';\n\nexport interface ISetBrowserSupportMetaElement {\n    support: Support;\n    primary?: boolean\n}\n\nexport interface IUpdateBrowserSupport {\n    supportFile: string;\n    supported?: boolean;\n    polyfill?: string;\n    error?: string;\n}\n\nexport interface IGetSupportUrls {\n    supportType: SupportType;\n}\n\nexport interface ILoadNextSupport {\n    supportType: SupportType;\n}\n\nexport type VamtigerSupport =  {\n    [K in VamtigerSupportFile]?: IUpdateBrowserSupport;\n}\n\ndeclare global {\n    interface Window extends VamtigerSupport {\n        [ElementId.vamtigerBrowserSupport]: HTMLMetaElement,\n        VamtigerBrowserSupport: (params: IUpdateBrowserSupport) => void;\n    }\n}\n\nexport const supportTypes = Object.keys(SupportType) as SupportType[];\n\nexport const regex = {\n    leadingData: /^data/,\n    trailingSupport: /(.*?Support)(Primary)?$/,\n    supportScript: /vamtiger(-\\w+)+-support/\n}","import {\n    MetaElementBrowserSupportAttribute,\n    Support ,\n    StringConstant,\n    StringObject,\n    regex,\n    SupportType,\n    LoadOnComplete,\n    LoadOnCompleteType\n} from './types';\n\nconst { vamtiger, jsExtension } = StringConstant;\nconst { leadingData } = regex;\nconst supportKeys = Object.keys(MetaElementBrowserSupportAttribute) as Support[];\n\nexport const primarySupport = new Set<string>([\n    'es2015Support'\n]);\n\nexport const supportScript: StringObject = Object.assign({} as StringObject, MetaElementBrowserSupportAttribute);\n\nexport const loadSupport = {\n    parallel: new Set([\n        SupportType.primary,\n        SupportType.secondary\n    ]),\n    series: new Set([\n\n    ])\n};\n\nexport const supportDone = Array.from(new Set([\n    SupportType.primary,\n    SupportType.secondary\n]));\n\nexport const loadOnComplete = Array.from(new Set(\n    Object.keys(LoadOnComplete) as LoadOnCompleteType[]\n))\n\nexport const jsonFormatConfig = {\n    format: 'json'\n};\n\nsupportKeys.forEach(key => supportScript[key] = supportScript[key].replace(leadingData, vamtiger) + jsExtension);","import { IGetSupportUrls, ElementId } from './types';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\n\nexport default function({ supportType }: IGetSupportUrls) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const urls = new Set<string>();\n    const elements = Array.from(vamtigerBrowserSupport.children) as HTMLMetaElement[];\n\n    let data: DOMStringMap;\n\n    elements.forEach(element => {\n        data = element.dataset;\n\n        if (data.hasOwnProperty(supportType)) {\n            urls.add(data.url);\n        }\n    });\n\n    return Array.from(urls);\n}","import loadScript from 'vamtiger-browser-method/source/load-script';\nimport { loadOnComplete } from './config';\nimport { ElementId } from './types';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\n\nexport default async function () {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const scripts = [] as HTMLScriptElement[];\n    const supportUrls = loadOnComplete\n        .map(key => vamtigerBrowserSupport.dataset[key])\n        .filter(url => url);\n    const loadScripts = supportUrls.reduce(\n        (loadSupport, src) => loadSupport\n            .then(() => loadScript({ src }))\n            .then(script => scripts.push(script) && scripts),\n        Promise.resolve(scripts)\n    );\n\n    return loadScripts;\n}","import loadScript from '../node_modules/vamtiger-browser-method/source/load-script';\nimport { supportTypes, SupportType } from './types';\nimport { loadSupport } from './config';\nimport getSupportUrls from './get-support-urls';\nimport loadScripts from './load-scripts';\n\nconst { parallel } = loadSupport;\n\nlet index = 0;\n\nexport default async function () {\n    const supportType = supportTypes[index];\n    const supportUrls = getSupportUrls({ supportType });\n    const supportScripts = [] as HTMLScriptElement[];\n\n    let scripts: Promise<typeof supportScripts>;\n\n    if (parallel.has(supportType)) {\n        scripts = Promise.all(supportUrls.map(src => loadScript({ src })))\n    } else if (supportType) {\n        scripts = supportUrls.reduce(\n            (loadSupport, src) => loadSupport\n                .then(() => loadScript({ src }))\n                .then(script => supportScripts.push(script) && supportScripts),\n            Promise.resolve(supportScripts)\n        );\n    }\n\n    if (supportType === SupportType.secondary) {\n        scripts = scripts.then(\n            secondaryScripts => loadScripts().then(tertiaryScripts => secondaryScripts.concat(tertiaryScripts))\n        );\n    }\n\n    ++index;\n\n    return scripts;\n}","import { \n    ILoadNextSupport,\n    ElementId \n} from './types';\nimport { supportDone } from './config';\nimport loadSupport from './load-support';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId\n\nexport default function ({ supportType}: ILoadNextSupport) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const supportTypeSelector = `meta[data-${supportType}]`;\n    const supportTypeMetaElements = Array.from(vamtigerBrowserSupport.querySelectorAll(supportTypeSelector)) as HTMLMetaElement[];\n    const supportTypeMetaElementsDone = supportTypeMetaElements.filter(element => supportDone.some(key => element.dataset.hasOwnProperty(key)));\n    const loadNextSupport = supportTypeMetaElements.length && supportTypeMetaElements.length === supportTypeMetaElementsDone.length;\n\n    if (loadNextSupport) {\n        loadSupport().catch(console.warn);\n    }\n}","import loadScript from '../node_modules/vamtiger-browser-method/source/load-script';\nimport {\n    IUpdateBrowserSupport,\n    ElementId,\n    StringConstant,\n    SupportType,\n    SupportTypeKey\n} from './types';\nimport loadNextSupport from './load-next-support';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { nothing } = StringConstant;\nconst supportTypes = Object.keys(SupportType) as SupportTypeKey[]\n\nexport default async function updateBrowserSupport({ supportFile, supported, polyfill, error }: IUpdateBrowserSupport) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const selector = `[data-url*=${supportFile}]`;\n    const metaElement = vamtigerBrowserSupport.querySelector(selector) as HTMLMetaElement;\n    const { dataset: data } = metaElement\n    const supportType = supportTypes.find(supportType => data.hasOwnProperty(supportType)) as SupportType;\n\n    let load;\n\n    if (supported) {\n        data.supported = nothing;\n    } else {\n        data.unsupported = nothing;\n    }\n\n    if (error) {\n        data.error = error;\n    }\n\n    if (polyfill) {\n        data.polyfill = polyfill;\n\n        await loadScript({ src: polyfill })\n    }\n\n    loadNextSupport({ supportType });\n}\n\nwindow.VamtigerBrowserSupport = updateBrowserSupport;","import { \n    ElementId, \n    ElmentName, \n    ElementAttribute, \n    MetaElementAttribute,\n    MetaElementBrowserSupportAttribute,\n    StringConstant,\n    Selector\n} from './types';\n\nconst { id } = ElementAttribute;\nconst { vamtigerBrowserSupport } = ElementId;\nconst { baseUrl } = MetaElementAttribute;\nconst { es2015Support }  = MetaElementBrowserSupportAttribute;\nconst { nothing, slash } = StringConstant;\nconst { vamtigerBrowserSupportScript: selector } = Selector;\n\nexport default function () {\n    const { head } = document;\n    const { firstChild } = head;\n    const metaElement = document.createElement(ElmentName.meta);\n    const vamtigerBrowserSupportScript = document.querySelector(selector) as HTMLScriptElement;\n    const vamtigerBrowserSupportScriptPaths = vamtigerBrowserSupportScript.src.split(slash);\n    const baseUrlPath = vamtigerBrowserSupportScriptPaths\n        .slice(0, vamtigerBrowserSupportScriptPaths.length - 1)\n        .join(slash);\n\n    metaElement.setAttribute(id, vamtigerBrowserSupport);\n\n    vamtigerBrowserSupportScript && Object.assign(metaElement.dataset,vamtigerBrowserSupportScript.dataset);\n\n    metaElement.dataset[baseUrl] = baseUrlPath;\n\n    head.insertBefore(metaElement, firstChild);\n}","import {\n    ISetBrowserSupportMetaElement,\n    ElementId,\n    StringConstant,\n    ElmentName,\n    MetaElementAttribute,\n    regex,\n    SupportType\n} from './types';\nimport { supportScript } from './config'\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { slash, nothing } = StringConstant;\nconst { meta } = ElmentName;\nconst { trailingSupport } = regex;\n\nexport default function ({ support: supportDataKey, primary }: ISetBrowserSupportMetaElement) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport } = window;\n    const { dataset } = vamtigerBrowserSupport;\n    const { baseUrl } = dataset;\n    const [, support, supportType] = supportDataKey.match(trailingSupport) || [] as string[];\n    const currentSupportScript = supportScript[support];\n    const scriptUrl = [\n        baseUrl,\n        currentSupportScript\n    ].join(slash);\n    const metaElement = document.createElement(meta);\n\n    metaElement.dataset.name = support;\n\n    metaElement.dataset.url = scriptUrl;\n\n    if (supportType) {\n        metaElement.dataset[supportType.toLowerCase()] = nothing;\n    } else {\n        metaElement.dataset[SupportType.secondary] = nothing;\n    }\n\n    vamtigerBrowserSupport.appendChild(metaElement);\n};","import { ElementId, Support, regex } from './types';\nimport { primarySupport } from './config';\nimport setBrowserSupportMetaElement from'./set-browser-support-meta-element';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { trailingSupport } = regex;\n\nexport default function () {\n    const { [ vamtigerBrowserSupportId ]: vamtigerBrowserSupport } = window;\n    const { dataset } = vamtigerBrowserSupport;\n    const supportKey = Object\n        .keys(dataset)\n        .filter(key => key.match(trailingSupport))\n        .sort() as Support[];\n\n    supportKey.forEach(support => setBrowserSupportMetaElement({\n        support,\n        primary: primarySupport.has(support)\n    }));\n}","export default () => new Promise((resolve, reject) => {\n    const { document } = window;\n    const isBrowser = document ? true : false;\n\n    (isBrowser) ? resolve() : reject();\n})","export * from '../node_modules/vamtiger-browser-method/source/load-ts-lib';\nexport * from './update-browser-support';\nimport setMetaElement from './set-meta-element';\nimport setBrowserSupportMetaElements from'./set-browser-support-meta-elements';\nimport isBrowser from './is-browser';\nimport loadSupport from './load-support';\nimport { ErrorMessage } from './types';\n\nexport default function main() {\n    return isBrowser()\n        .then(() => addEventListener('load', handleLoad));\n}\n\nfunction handleLoad(event: Event) {\n    removeEventListener('load', handleLoad);\n\n    setMetaElement();\n\n    setBrowserSupportMetaElements();\n\n    loadSupport().catch(handleError);\n}\n\nfunction handleError(error: Error) {\n    console.warn(error);\n    console.warn(notBrowser);\n}\n\nconst { notBrowser } = ErrorMessage;\n\nmain().catch(handleError);"],"names":["__extends","__assign","__rest","__decorate","__param","__metadata","__awaiter","__generator","__exportStar","__values","__read","__spread","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","factory","root","global","self","this","createExporter","exports","previous","Object","create","defineProperty","value","__esModule","id","v","define","amd","module","exporter","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","assign","t","s","i","n","arguments","length","call","e","indexOf","getOwnPropertySymbols","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","paramIndex","decorator","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","pop","push","m","o","ar","error","concat","asyncIterator","q","a","resume","fulfill","settle","shift","cooked","raw","mod","k","default","ScriptType","ScriptAttribute","ErrorMessage","StringConstant","LinkRel","LoadScriptElement","Selector","keys","tslib","forEach","window","ElmentName","ElementId","ElementAttribute","MetaElementAttribute","MetaElementBrowserSupportAttribute","NpmScript","SupportType","LoadOnComplete","failedToLoadScript","stylesheet","scriptElement","link","style","params","head","_a","js","scriptName","jsonld","src","_b","css","stylesheetName","href","remoteScript","element","selector","existingScript","querySelector","script","document","createElement","HTMLScriptElement","innerHTML","dataset","name","setAttribute","type","HTMLLinkElement","rel","HTMLStyleElement","appendChild","addEventListener","handleLoad","event","removeEventListener","handleLoadError","console","Error","supportTypes","regex","vamtiger","jsExtension","leadingData","supportKeys","primarySupport","Set","supportScript","loadSupport","parallel","primary","secondary","series","supportDone","from","loadOnComplete","replace","vamtigerBrowserSupportId","index","supportType","supportUrls","data","vamtigerBrowserSupport","urls","children","add","url","getSupportUrls","supportScripts","has","scripts","all","map","loadScript","reduce","secondaryScripts","filter","loadScripts","tertiaryScripts","nothing","VamtigerBrowserSupport","supportFile","supported","polyfill","metaElement","find","unsupported","_c","supportTypeSelector","supportTypeMetaElements","querySelectorAll","supportTypeMetaElementsDone","some","catch","warn","loadNextSupport","baseUrl","slash","meta","trailingSupport","match","sort","support","supportDataKey","scriptUrl","join","toLowerCase","setBrowserSupportMetaElement","main","isBrowser","firstChild","vamtigerBrowserSupportScript","vamtigerBrowserSupportScriptPaths","baseUrlPath","split","slice","insertBefore","setBrowserSupportMetaElements","handleError","notBrowser"],"mappings":"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"}