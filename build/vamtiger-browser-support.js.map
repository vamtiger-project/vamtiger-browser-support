{"version":3,"file":"vamtiger-browser-support.js","sources":["../node_modules/tslib/tslib.js","../source/types.ts","../source/config.ts","../source/get-support-urls.ts","../source/load-scripts.ts","../source/load-support.ts","../source/load-next-support.ts","../source/update-browser-support.ts","../source/set-meta-element.ts","../source/set-browser-support-meta-element.ts","../source/set-browser-support-meta-elements.ts","../source/is-legacy.ts","../source/load-dependencies.ts","../source/is-bot.ts","../source/set-browser-data.ts","../source/vamtiger-browser-support.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global global, define, System, Reflect, Promise */\r\nvar __extends;\r\nvar __assign;\r\nvar __rest;\r\nvar __decorate;\r\nvar __param;\r\nvar __metadata;\r\nvar __awaiter;\r\nvar __generator;\r\nvar __exportStar;\r\nvar __values;\r\nvar __read;\r\nvar __spread;\r\nvar __spreadArrays;\r\nvar __await;\r\nvar __asyncGenerator;\r\nvar __asyncDelegator;\r\nvar __asyncValues;\r\nvar __makeTemplateObject;\r\nvar __importStar;\r\nvar __importDefault;\r\n(function (factory) {\r\n    var root = typeof global === \"object\" ? global : typeof self === \"object\" ? self : typeof this === \"object\" ? this : {};\r\n    if (typeof define === \"function\" && define.amd) {\r\n        define(\"tslib\", [\"exports\"], function (exports) { factory(createExporter(root, createExporter(exports))); });\r\n    }\r\n    else if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n        factory(createExporter(root, createExporter(module.exports)));\r\n    }\r\n    else {\r\n        factory(createExporter(root));\r\n    }\r\n    function createExporter(exports, previous) {\r\n        if (exports !== root) {\r\n            if (typeof Object.create === \"function\") {\r\n                Object.defineProperty(exports, \"__esModule\", { value: true });\r\n            }\r\n            else {\r\n                exports.__esModule = true;\r\n            }\r\n        }\r\n        return function (id, v) { return exports[id] = previous ? previous(id, v) : v; };\r\n    }\r\n})\r\n(function (exporter) {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n\r\n    __extends = function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n\r\n    __assign = Object.assign || function (t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n\r\n    __rest = function (s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                    t[p[i]] = s[p[i]];\r\n            }\r\n        return t;\r\n    };\r\n\r\n    __decorate = function (decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    };\r\n\r\n    __param = function (paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    };\r\n\r\n    __metadata = function (metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    };\r\n\r\n    __awaiter = function (thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    };\r\n\r\n    __generator = function (thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    };\r\n\r\n    __exportStar = function (m, exports) {\r\n        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n    };\r\n\r\n    __values = function (o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    };\r\n\r\n    __read = function (o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    };\r\n\r\n    __spread = function () {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    };\r\n\r\n    __spreadArrays = function () {\r\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n                r[k] = a[j];\r\n        return r;\r\n    };\r\n\r\n    __await = function (v) {\r\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n    };\r\n\r\n    __asyncGenerator = function (thisArg, _arguments, generator) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n        function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n        function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }\r\n        function fulfill(value) { resume(\"next\", value); }\r\n        function reject(value) { resume(\"throw\", value); }\r\n        function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n    };\r\n\r\n    __asyncDelegator = function (o) {\r\n        var i, p;\r\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n    };\r\n\r\n    __asyncValues = function (o) {\r\n        if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n        var m = o[Symbol.asyncIterator], i;\r\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n    };\r\n\r\n    __makeTemplateObject = function (cooked, raw) {\r\n        if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n        return cooked;\r\n    };\r\n\r\n    __importStar = function (mod) {\r\n        if (mod && mod.__esModule) return mod;\r\n        var result = {};\r\n        if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n        result[\"default\"] = mod;\r\n        return result;\r\n    };\r\n\r\n    __importDefault = function (mod) {\r\n        return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n    };\r\n\r\n    exporter(\"__extends\", __extends);\r\n    exporter(\"__assign\", __assign);\r\n    exporter(\"__rest\", __rest);\r\n    exporter(\"__decorate\", __decorate);\r\n    exporter(\"__param\", __param);\r\n    exporter(\"__metadata\", __metadata);\r\n    exporter(\"__awaiter\", __awaiter);\r\n    exporter(\"__generator\", __generator);\r\n    exporter(\"__exportStar\", __exportStar);\r\n    exporter(\"__values\", __values);\r\n    exporter(\"__read\", __read);\r\n    exporter(\"__spread\", __spread);\r\n    exporter(\"__spreadArrays\", __spreadArrays);\r\n    exporter(\"__await\", __await);\r\n    exporter(\"__asyncGenerator\", __asyncGenerator);\r\n    exporter(\"__asyncDelegator\", __asyncDelegator);\r\n    exporter(\"__asyncValues\", __asyncValues);\r\n    exporter(\"__makeTemplateObject\", __makeTemplateObject);\r\n    exporter(\"__importStar\", __importStar);\r\n    exporter(\"__importDefault\", __importDefault);\r\n});\r\n","import * as tslib from '../node_modules/tslib/tslib';\nimport * as VamtigerBrowserMethodTypes from 'vamtiger-browser-method/build/types';\nimport * as AWS from 'aws-sdk';\n\ntslib;\n\nexport enum StringConstant {\n    nothing = '',\n    build = 'build',\n    vamtiger = 'vamtiger',\n    slash = '/',\n    jsExtension = '.js',\n    bashAnd = '&&',\n    arn = 'arn',\n    sns = 'sns',\n    aws = 'aws',\n    colon = ':',\n    hyphen = '-',\n    space = ' ',\n    'vamtiger-contact' = 'vamtiger-contact',\n    '5e5164d3' = '5e5164d3',\n    cc71 = 'cc71',\n    '4e5b' = '4e5b',\n    '9c34' = '9c34',\n    '042fe735f31c' = '042fe735f31c'\n}\n\nexport enum Region {\n    usWest2= 'us-west-2'\n}\n\nexport enum ElmentName {\n    meta = 'meta',\n    script = 'script'\n}\n\nexport enum ElementId {\n    vamtigerBrowserSupport = 'vamtiger-browser-support'\n}\n\nexport enum ElementAttribute {\n    id = 'id'\n}\n\nexport enum MetaElementAttribute {\n    baseUrl = 'baseUrl',\n    name = 'name',\n    url = 'url',\n    primary = 'primary',\n    loaded = 'loaded',\n    supported = 'supported',\n    unsupported = 'unsupported',\n    error = 'error',\n    polyfill = 'polyfill',\n    loadCritical = 'loadCritical',\n    load = 'load',\n    wait = 'wait'\n}\n\nexport enum MetaElementBrowserSupportAttribute {\n    botSupport = 'data-bot-support',\n    es2015Support = 'data-es2015-support',\n    elementQuerySupport = 'data-element-query-support',\n    webComponentSupport = 'data-web-component-support',\n    fetchSupport = 'data-fetch-support',\n    awsSupport = 'data-aws-support',\n    contactSupport = 'data-contact-support'\n}\n\nexport enum Selector {\n    vamtigerBrowserSupportScript = 'script[src*=\"vamtiger-browser-support\"]',\n    vamtigerBrowserMethodJsonJs = '[src$=\"vamtiger-browser-method.js.json.js\"]',\n    vamtigerBrowserMethodJson = '[data-name$=\"vamtiger-browser-method.js.json\"]'\n}\n\nexport enum ScriptUrl {\n    vamtigerBrowserMethod = 'vamtiger-browser-method.js',\n    vamtigerBrowserMethodJsonJs = 'vamtiger-browser-method.js.json.js',\n    tsLib = 'https://cdn.jsdelivr.net/npm/tslib@latest'\n}\n\nexport enum ErrorMessage {\n    notBrowser = 'This is not a web browser',\n    noFormForSelector = 'No Form for Selector',\n    noFieldInFormForSelector = 'No Field in Form for Selector',\n    objectAssignNotSupported = 'Object.assign is not supported',\n    arrayFromNotSupported = 'Array.from is not supported',\n    destructringAssignmentNotSupported = 'Destructuring Assignment is not supported',\n    arrowFunctionsNotSupported = 'Arrow functions are not supported'\n}\n\nexport enum NpmScript {\n    bundleSource = 'bundle-source',\n    copyDependencies = 'copy-dependencies'\n}\n\nexport enum SupportType {\n    primary = 'primary',\n    secondary = 'secondary'\n}\n\nexport enum LoadOnComplete {\n    loadCritical = 'loadCritical',\n    load = 'load'\n}\n\nexport enum VamtigerFormDataSupportFormFieldValue {\n    innerHTML = 'innerHTML'\n}\n\nexport enum DocumentDataAttribute {\n    touchSupport = 'vamtigerTouchSupport',\n    bot = 'vamtigerBot',\n    legacy = 'vamtigerLegacy',\n    textMode = 'vamtigerTextMode'\n}\n\nexport enum SupportFile {\n    elementQuery = 'vamtiger-element-query-support'\n}\n\nexport enum Polyfill {\n    elementQuery = 'https://cdn.jsdelivr.net/npm/eqcss@latest/EQCSS.min.js'\n}\n\nexport type LoadOnCompleteType  = keyof typeof LoadOnComplete;\n\nexport type Support = keyof typeof MetaElementBrowserSupportAttribute;\n\nexport type SupportTypeKey = keyof typeof SupportType;\n\nexport type StringObject = {[key: string]: string};\n\nexport type AnyObject = {[key: string]: any};\n\nexport type VamtigerSupportFile = 'vamtiger-es2015-support';\n\nexport type VamtigerFormDataSupportFormFieldValueKey = keyof typeof VamtigerFormDataSupportFormFieldValue;\n\nexport type TsLibType = typeof tslib;\n\nexport type TsLibKey = keyof TsLibType;\n\nexport type TsLib = {\n    [K in TsLibKey]: TsLibType[K]\n}\n\nexport type VamtigerSupport =  {\n    [K in VamtigerSupportFile]?: IUpdateBrowserSupport;\n}\n\nexport type VamtigerContactResolve = (response: AWS.SNS.PublishResponse) => void;\n\nexport type VamtigerContactReject = (error: AWS.AWSError) => void;\n\nexport interface ISetBrowserSupportMetaElement {\n    support: Support;\n    primary?: boolean;\n}\n\nexport interface IUpdateBrowserSupport {\n    supportFile: string;\n    supported?: boolean;\n    polyfill?: string;\n    polyfills?: string[];\n    polyfillChain?: string[][]\n    wait?: boolean;\n    error?: string;\n}\n\nexport interface IUpdateBrowserSupportLoadScripts {\n    polyfills: IUpdateBrowserSupport['polyfills'];\n}\n\nexport interface IGetSupportUrls {\n    supportType: SupportType;\n}\n\nexport interface ILoadNextSupport {\n    supportType: SupportType;\n}\n\nexport interface IVamtigerContactParams {\n    template: string;\n    subject: string;\n    origin: string;\n}\n\nexport interface IVamtigerFormSupport {\n    form: string;\n    field?: IVamtigerFormSupportFormField;\n}\n\nexport interface IVamtigerFormSupportFormField {\n    selector: string;\n    name: string;\n    value?: VamtigerFormDataSupportFormFieldValueKey;\n}\n\ndeclare global {\n    interface Window extends VamtigerSupport, TsLib {\n        [ElementId.vamtigerBrowserSupport]: HTMLMetaElement,\n        VamtigerBrowserSupport: (params: IUpdateBrowserSupport) => void;\n        VamtigerContact: (params: IVamtigerContactParams) => Promise<AWS.SNS.PublishResponse>;\n        _VamtigerContact_: (params: any) => void;\n        VamtigerForm: (params: IVamtigerFormSupport) => Promise<AnyObject>;\n        AWS: typeof AWS;\n    }\n}\n\nexport const supportTypes = Object.keys(SupportType) as SupportType[];\n\nexport const regex = {\n    leadingData: /^data/,\n    trailingSupport: /(.*?Support)(Primary)?$/,\n    supportScript: /vamtiger(-\\w+)+-(support|polyfill)/,\n    distTag: /(\\d|latest)$/,\n    bot: /bot|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex|googlebot|google-structured-data-testing-tool|bingbot|linkedinbot|mediapartners-google/i\n}\n\nexport const stringConstant = {\n    ...StringConstant,\n    365080655670: 365080655670\n};\n\nexport const selector = {\n    vamtigerBrowserMethod: `script[src=\"${ScriptUrl.vamtigerBrowserMethod}\"]`\n}","import {\n    MetaElementBrowserSupportAttribute,\n    MetaElementAttribute,\n    Support ,\n    StringConstant,\n    StringObject,\n    regex,\n    SupportType,\n    LoadOnComplete,\n    LoadOnCompleteType,\n    stringConstant,\n    Region\n} from './types';\n\nconst { vamtiger, jsExtension, nothing } = StringConstant;\nconst { leadingData } = regex;\nconst supportKeys = Object.keys(MetaElementBrowserSupportAttribute) as Support[];\n\nexport const dependencies = [] as string[];\n\nexport const legacyDependencies = [\n    [\n        'https://cdn.jsdelivr.net/npm/es5-shim@latest/es5-shim.min.js',\n        'https://cdn.jsdelivr.net/npm/es6-object-assign/dist/object-assign.min.js'\n    ],\n    [\n        'https://cdn.jsdelivr.net/npm/es6-shim@latest/es6-shim.min.js',\n    ],\n    [\n        'https://cdn.jsdelivr.net/npm/babel-polyfill@latest/dist/polyfill.min.js',\n        'https://cdn.jsdelivr.net/npm/@babel/standalone@latest/babel.min.js'\n    ]\n];\n\nexport const nodeDependencies = [\n    'vamtiger-browser-method'\n]\n\nexport const primarySupport = new Set<string>([\n    'botSupport',\n    'es2015Support'\n]);\n\nexport const supportScript: StringObject = {\n    ...MetaElementBrowserSupportAttribute\n};\n\nexport const loadSupport = {\n    parallel: new Set([\n        SupportType.primary,\n        SupportType.secondary\n    ]),\n    series: new Set([\n\n    ])\n};\n\nexport const supportDone = [\n    MetaElementAttribute.supported,\n    MetaElementAttribute.unsupported\n];\n\nexport const loadOnComplete = Object.keys(LoadOnComplete) as LoadOnCompleteType[];\n\nexport const jsonFormatConfig = {\n    format: 'json'\n};\n\nexport const vc = gvc();\n\nsupportKeys.forEach(key => supportScript[key] = supportScript[key].replace(leadingData, vamtiger) + jsExtension);\n\nfunction gvc() {\n    const {\n        arn: a,\n        aws: b,\n        sns: c,\n        '365080655670': e,\n        'vamtiger-contact': f,\n        colon: g,\n        '5e5164d3': h,\n        cc71: i,\n        '4e5b': j,\n        '9c34': k,\n        '042fe735f31c': l,\n        hyphen: m\n    } = stringConstant;\n    const { usWest2: d } = Region;\n    const z = [\n        a,\n        b,\n        c,\n        d,\n        e,\n        f\n    ].join(g)\n    const x = [\n        d,\n        [\n            h,\n            i,\n            j,\n            k,\n            l\n        ].join(m)\n    ].join(g);\n    const y = {\n        z: z.split(nothing),\n        x: x.split(nothing),\n        y: d.split(nothing)\n    };\n\n    return y;\n}","import { IGetSupportUrls, ElementId } from './types';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\n\nexport default function({ supportType }: IGetSupportUrls) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const urls = new Set<string>();\n    const elements = Array.from(vamtigerBrowserSupport.children) as HTMLMetaElement[];\n\n    let data: DOMStringMap;\n\n    elements.forEach(element => {\n        data = element.dataset;\n\n        if (data.hasOwnProperty(supportType)) {\n            urls.add(data.url);\n        }\n    });\n\n    return Array.from(urls);\n}","import { ElementId } from './types';\nimport { loadOnComplete } from './config';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\n\nexport default async function () {\n    const { VamtigerBrowserMethod } = window;\n    const { loadScript } = VamtigerBrowserMethod;\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const scripts = [] as HTMLScriptElement[];\n    const supportUrls = loadOnComplete\n        .map(key => vamtigerBrowserSupport.dataset[key])\n        .filter(url => url);\n    const loadScripts = supportUrls.reduce(\n        (loadSupport, src) => loadSupport\n            .then(() => loadScript({ src }))\n            .then(script => scripts.push(script) && scripts),\n        Promise.resolve(scripts)\n    );\n\n    return loadScripts;\n}","import { supportTypes } from './types';\nimport { loadSupport } from './config';\nimport getSupportUrls from './get-support-urls';\nimport loadScripts from './load-scripts';\nimport loadNextSupport from './load-next-support';\n\nconst { parallel } = loadSupport;\n\nlet index = 0;\nlet done = false;\n\nexport default async function () {\n    const { VamtigerBrowserMethod } = window;\n    const { loadScript } = VamtigerBrowserMethod;\n    const supportType = supportTypes[index];\n    const supportUrls = getSupportUrls({ supportType });\n    const supportScripts = [] as HTMLScriptElement[];\n\n    let scripts: Promise<typeof supportScripts>;\n\n    if (parallel.has(supportType)) {\n        scripts = Promise.all(supportUrls.map(src => loadScript({ src })));\n\n        if (!supportUrls.length) {\n            loadNextSupport({ supportType });\n        }\n    } else if (supportType) {\n        scripts = supportUrls.reduce(\n            (loadSupport, src) => loadSupport\n                .then(() => loadScript({ src }))\n                .then(script => supportScripts.push(script) && supportScripts),\n            Promise.resolve(supportScripts)\n        );\n    } else if (!supportType && !done) {\n        done = true;\n\n        scripts = loadScripts();\n    }\n\n    index++;\n\n    return scripts;\n}","import {\n    ILoadNextSupport,\n    ElementId,\n    MetaElementAttribute\n} from './types';\nimport { supportDone } from './config';\nimport loadSupport from './load-support';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { wait } = MetaElementAttribute;\n\nexport default function ({ supportType}: ILoadNextSupport) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport  } = window;\n    const supportTypeSelector = `meta[data-${supportType}]`;\n    const supportTypeMetaElements = Array.from(vamtigerBrowserSupport.querySelectorAll(supportTypeSelector)) as HTMLMetaElement[];\n    const supportTypeMetaElementsDone = supportTypeMetaElements\n        .filter(element => supportDone.some(key => element.dataset.hasOwnProperty(key)))\n        .filter(element => !element.dataset.hasOwnProperty(wait));\n    const loadNextSupport = supportTypeMetaElements && supportTypeMetaElements.length === supportTypeMetaElementsDone.length;\n\n    if (loadNextSupport) {\n        loadSupport().catch(console.warn);\n    }\n}","import {\n    IUpdateBrowserSupport,\n    ElementId,\n    StringConstant,\n    SupportType,\n    SupportTypeKey\n} from './types';\nimport loadNextSupport from './load-next-support';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { nothing } = StringConstant;\nconst supportTypes = Object.keys(SupportType) as SupportTypeKey[]\n\nexport default async function updateBrowserSupport({ supportFile, supported, polyfill, polyfills, polyfillChain, error, wait }: IUpdateBrowserSupport) {\n    const {\n        [vamtigerBrowserSupportId]: vamtigerBrowserSupport,\n        VamtigerBrowserSupport,\n        VamtigerBrowserMethod\n    } = window;\n    const {\n        loadScript,\n        loadScripts,\n        loadScriptsSequentially\n    } = VamtigerBrowserMethod;\n    const selector = `[data-url*=${supportFile}]`;\n    const metaElement = vamtigerBrowserSupport.querySelector(selector) as HTMLMetaElement;\n    const { dataset: data } = metaElement\n    const supportType = supportTypes.find(supportType => data.hasOwnProperty(supportType)) as SupportType;\n\n    if (supported) {\n        data.supported = nothing;\n    } else {\n        data.unsupported = nothing;\n    }\n\n    if (wait) {\n        data.wait = nothing;\n    } else {\n        delete data.wait;\n    }\n\n    if (error) {\n        data.error = error;\n    }\n\n    if (polyfill) {\n        data.polyfill = polyfill;\n\n        loadScript({ src: polyfill })\n            .then(() => loadNextSupport({ supportType }))\n    } else if (polyfillChain) {\n        loadScriptsSequentially(polyfillChain.map(srcs => srcs.map(src => ({ src }))))\n            .then(scripts => scripts.forEach(({ src: polyfill }, index) => data[`polyfill-${index + 1}`] = polyfill))\n            .then(() => loadNextSupport({ supportType }));\n    } else if (polyfills) {\n        loadScripts(polyfills.map(polyfill => ({ src: polyfill })))\n            .then(scripts => scripts.forEach(({ src: polyfill }, index) => data[`polyfill-${index + 1}`] = polyfill))\n            .then(() => loadNextSupport({ supportType }));\n    } else {\n        loadNextSupport({ supportType });\n    }\n}\n\nif (!window.VamtigerBrowserSupport) {\n    window.VamtigerBrowserSupport = updateBrowserSupport;\n}","import {\n    ElementId,\n    ElmentName,\n    ElementAttribute,\n    MetaElementAttribute,\n    MetaElementBrowserSupportAttribute,\n    StringConstant,\n    Selector,\n    regex\n} from './types';\n\nconst { id } = ElementAttribute;\nconst { vamtigerBrowserSupport } = ElementId;\nconst { baseUrl } = MetaElementAttribute;\nconst { es2015Support }  = MetaElementBrowserSupportAttribute;\nconst { nothing, slash, build } = StringConstant;\nconst { vamtigerBrowserSupportScript: selector } = Selector;\nconst { distTag } = regex;\n\nexport default function () {\n    const { head } = document;\n    const { firstChild } = head;\n    const metaElement = document.createElement(ElmentName.meta);\n    const vamtigerBrowserSupportScript = document.querySelector(selector) as HTMLScriptElement;\n    const vamtigerBrowserSupportScriptPaths = vamtigerBrowserSupportScript.src.split(slash);\n    const baseUrlPaths = new Set(vamtigerBrowserSupportScriptPaths\n        .slice(0, vamtigerBrowserSupportScriptPaths.length - 1));\n    const baseUrlPath = vamtigerBrowserSupportScript.src.match(distTag)\n        && `${vamtigerBrowserSupportScript.src}/build`\n        || Array.from(baseUrlPaths).join(slash);\n\n    metaElement.setAttribute(id, vamtigerBrowserSupport);\n\n    vamtigerBrowserSupportScript && Object.keys(vamtigerBrowserSupportScript.dataset).forEach(key => {\n        if (!metaElement.dataset[key]) {\n            metaElement.dataset[key] = vamtigerBrowserSupportScript.dataset[key];\n        }\n    });\n\n    metaElement.dataset[baseUrl] = baseUrlPath;\n\n    head.insertBefore(metaElement, firstChild);\n}","import {\n    ISetBrowserSupportMetaElement,\n    ElementId,\n    StringConstant,\n    ElmentName,\n    MetaElementAttribute,\n    regex,\n    SupportType\n} from './types';\nimport { supportScript } from './config'\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { slash, nothing } = StringConstant;\nconst { meta } = ElmentName;\nconst { trailingSupport } = regex;\n\nexport default function ({ support: supportDataKey }: ISetBrowserSupportMetaElement) {\n    const { [vamtigerBrowserSupportId]: vamtigerBrowserSupport } = window;\n    const { dataset } = vamtigerBrowserSupport;\n    const { baseUrl } = dataset;\n    const [, support, supportType] = supportDataKey.match(trailingSupport) || [] as string[];\n    const currentSupportScript = supportScript[support];\n    const scriptUrl = [\n        baseUrl,\n        currentSupportScript\n    ].join(slash);\n    const metaElement = document.createElement(meta);\n\n    metaElement.dataset.name = support;\n\n    metaElement.dataset.url = scriptUrl;\n\n    if (supportType) {\n        metaElement.dataset[supportType.toLowerCase()] = nothing;\n    } else {\n        metaElement.dataset[SupportType.secondary] = nothing;\n    }\n\n    vamtigerBrowserSupport.appendChild(metaElement);\n};","import { ElementId, Support, regex } from './types';\nimport { primarySupport } from './config';\nimport setBrowserSupportMetaElement from'./set-browser-support-meta-element';\n\nconst { vamtigerBrowserSupport: vamtigerBrowserSupportId } = ElementId;\nconst { trailingSupport } = regex;\n\nexport default function () {\n    const { [ vamtigerBrowserSupportId ]: vamtigerBrowserSupport } = window;\n    const { dataset } = vamtigerBrowserSupport;\n    const supportKey = Object\n        .keys(dataset)\n        .filter(key => key.match(trailingSupport))\n        .sort() as Support[];\n\n    supportKey.forEach(support => setBrowserSupportMetaElement({\n        support,\n        primary: primarySupport.has(support)\n    }));\n}","import {\n    ErrorMessage\n} from './types';\n\nconst {\n    objectAssignNotSupported,\n    arrayFromNotSupported,\n    destructringAssignmentNotSupported,\n    arrowFunctionsNotSupported\n} = ErrorMessage;\n\nlet legacy: boolean;\n\nexport default async function () {\n    const isLegacy = legacy === undefined ? await Promise\n        .all([\n            objectAssign(),\n            arrayFrom(),\n            destructringAssignment(),\n            arrowFunctions()\n        ])\n        .then(results => !results.every(result => result))\n        :\n        legacy;\n\n    legacy = isLegacy ? true : false;\n\n    return legacy;\n}\n\nfunction objectAssign() {return new Promise((resolve, reject) => {\n    let result = false;\n\n    try {\n        eval(`Object.assign({result: false}, {result: true}).result`);\n        result = true;\n    } catch(error) {\n        handleError(new Error(objectAssignNotSupported));\n    }\n\n    resolve(result);\n})}\n\nfunction arrayFrom() {return new Promise((resolve, reject) => {\n    let result = false;\n\n    try {\n        eval(`Array.from('1234').length === 4`);\n        result = true;\n    } catch(error) {\n        handleError(new Error(arrayFromNotSupported));\n    }\n\n    resolve(result);\n})}\n\nfunction destructringAssignment() {return new Promise((resolve, reject) => {\n    let result = false;\n\n    try {\n        eval(`\n            let object = {\n                result: true\n            };\n            let { result: currentResult } = object;\n        `);\n\n        result = true;\n    } catch(error) {\n        handleError(new Error(destructringAssignmentNotSupported));\n    }\n\n    resolve(result);\n})}\n\nfunction arrowFunctions() {return new Promise((resolve, reject) => {\n    let result = false;\n\n    try {\n        eval(`(() => true)()`);\n        result = true;\n    } catch(error) {\n        handleError(new Error(arrowFunctionsNotSupported));\n    }\n\n    resolve(result);\n})}\n\nfunction handleError(error: Error) {\n    console.warn(error.message);\n}","import { IJsonScriptData } from 'vamtiger-browser-method/build/types';\nimport {\n    Selector,\n    ScriptUrl,\n    StringConstant\n} from './types';\nimport {\n    legacyDependencies\n} from './config';\nimport isLegacy from './is-legacy';\n\nconst { parse } = JSON;\n\nexport default async function() {\n    await loadLegacyDependencies();\n    await loadDependencies();\n}\n\nasync function loadLegacyDependencies() {\n    const legacy = await isLegacy();\n    const urlsGroups = legacy && legacyDependencies || [];\n\n    await Promise.all(urlsGroups.map(urls => Promise.all(urls.map(url => loadDependency(url).catch(handleError)))));\n}\n\nasync function loadDependencies() {\n    const dependencies = await loadDependency(ScriptUrl.vamtigerBrowserMethod)\n        .catch(() => loadDependency(ScriptUrl.vamtigerBrowserMethodJsonJs));\n\n    await loadVamtigerBrowserMethod();\n\n    return dependencies;\n}\n\nfunction loadDependency(currentSrc: string) {return new Promise((resolve: (script?: HTMLScriptElement) => void, reject) => {\n    const { head } = document;\n    const vamtigerBrowserSupportScript = head.querySelector<HTMLScriptElement>(Selector.vamtigerBrowserSupportScript);\n    const vamtigerBrowserSupportScriptPaths = vamtigerBrowserSupportScript && vamtigerBrowserSupportScript.src\n        .split(StringConstant.slash);\n    const vamtigerBrowserSupportScriptParentPath = vamtigerBrowserSupportScriptPaths\n        .slice(0, vamtigerBrowserSupportScriptPaths.length - 1)\n        .join(StringConstant.slash);\n    const src = currentSrc === ScriptUrl.vamtigerBrowserMethodJsonJs && `${vamtigerBrowserSupportScriptParentPath}/${currentSrc}` || currentSrc;\n    const selector = `[src=\"${src}\"]`;\n    const existingScript = head.querySelector<HTMLScriptElement>(selector);\n    const script = !existingScript && document.createElement('script');\n\n    if (script) {\n        script.addEventListener('load', () => resolve(script));\n        script.addEventListener('error', error => {\n            head.removeChild(script);\n\n            reject(error);\n        });\n\n        script.src = src;\n\n        head.appendChild(script);\n    } else if (existingScript) {\n        resolve(existingScript);\n    } else {\n        resolve();\n    }\n})}\n\nfunction loadVamtigerBrowserMethod() {return new Promise(async (resolve, reject) => {\n    const { head } = document;\n    const selector = Selector.vamtigerBrowserMethodJson;\n    const script = document.querySelector<HTMLScriptElement>(selector);\n    const jsonText = script && script.innerHTML;\n    const data = jsonText && parse(jsonText) as IJsonScriptData;\n    const js = data && data.text;\n    const vamtigerBrowserMethodScript = document.createElement('script');\n\n    if (js) {\n        vamtigerBrowserMethodScript.dataset.name = ScriptUrl.vamtigerBrowserMethod;\n        vamtigerBrowserMethodScript.innerHTML = js;\n\n        head.appendChild(vamtigerBrowserMethodScript);\n    }\n\n    addEventListener('vamtigerBrowserMethodReady', resolve);\n})}\n\nfunction handleError(error: Error) {\n    console.warn(error.name);\n    console.warn(error.message);\n    console.warn(error.stack);\n}","import {\n    regex\n} from './types';\n\nconst { bot } = regex;\n\nlet log = false\n\nexport default function () {\n    const { userAgent, webdriver } = navigator;\n    const isBot = webdriver || navigator && Boolean(userAgent.match(bot));\n\n    return isBot;\n}","import {\n    DocumentDataAttribute,\n    StringConstant\n} from './types';\nimport isBot from './is-bot';\nimport isLegacy from './is-legacy';\n\nconst { nothing } = StringConstant;\n\nexport default async function () {\n    const { ontouchstart, document } = window;\n    const { documentElement } = document;\n    const { dataset } = documentElement;\n    const { maxTouchPoints, msMaxTouchPoints } = navigator;\n    const touchSupport = (ontouchstart\n        || window.hasOwnProperty('DocumentTouch')\n        || maxTouchPoints\n        || msMaxTouchPoints) ? true : false;\n    const bot = isBot();\n    const legacy = await isLegacy();\n    const attributes = [\n        {\n            key: DocumentDataAttribute.touchSupport,\n            value: touchSupport\n        },\n        {\n            key: DocumentDataAttribute.bot,\n            value: bot\n        },\n        {\n            key: DocumentDataAttribute.legacy,\n            value: legacy\n        },\n        {\n            key: DocumentDataAttribute.textMode,\n            value: bot\n        },\n    ];\n\n    attributes.forEach(({key, value}) => {\n        if (key && value) {\n            dataset[key] = nothing\n        }\n    });\n}","import { ErrorMessage } from './types';\nexport * from './update-browser-support';\nimport setMetaElement from './set-meta-element';\nimport setBrowserSupportMetaElements from'./set-browser-support-meta-elements';\nimport loadSupport from './load-support';\nimport loadDependencies from './load-dependencies';\nimport setBrowserData from './set-browser-data';\n\nasync function handleLoad(event: Event) {\n    removeEventListener('load', handleLoad);\n\n    await loadDependencies();\n\n    setMetaElement();\n\n    setBrowserSupportMetaElements();\n\n    loadSupport().catch(handleError);\n\n    setBrowserData();\n}\n\nfunction handleError(error: Error) {\n    console.warn(error);\n    console.warn(notBrowser);\n}\n\nconst { notBrowser } = ErrorMessage;\n\naddEventListener('load', handleLoad);"],"names":["__extends","__assign","__rest","__decorate","__param","__metadata","__awaiter","__generator","__exportStar","__values","__read","__spread","__spreadArrays","__await","__asyncGenerator","__asyncDelegator","__asyncValues","__makeTemplateObject","__importStar","__importDefault","factory","root","global","self","this","createExporter","exports","previous","Object","create","defineProperty","value","__esModule","id","v","define","amd","module","exporter","extendStatics","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","assign","t","s","i","n","arguments","length","call","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","paramIndex","decorator","metadataKey","metadataValue","metadata","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","body","f","y","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","op","TypeError","pop","push","m","o","ar","error","concat","il","k","a","j","jl","asyncIterator","q","resume","fulfill","settle","shift","cooked","raw","mod","default","StringConstant","Region","ElmentName","ElementId","ElementAttribute","MetaElementAttribute","MetaElementBrowserSupportAttribute","Selector","ScriptUrl","ErrorMessage","NpmScript","SupportType","LoadOnComplete","VamtigerFormDataSupportFormFieldValue","DocumentDataAttribute","SupportFile","Polyfill","supportTypes","keys","regex","leadingData","trailingSupport","supportScript","distTag","bot","stringConstant","365080655670","selector","vamtigerBrowserMethod","vamtiger","jsExtension","nothing","supportKeys","legacyDependencies","primarySupport","Set","loadSupport","parallel","primary","secondary","series","supportDone","supported","unsupported","loadOnComplete","vc","gvc","h","l","z","join","x","split","forEach","replace","vamtigerBrowserSupportId","_a","data","supportType","vamtigerBrowserSupport","urls","from","children","element","dataset","add","url","VamtigerBrowserMethod","window","loadScript","scripts","supportUrls","map","filter","reduce","src","script","index","getSupportUrls","supportScripts","has","all","loadNextSupport","loadScripts","wait","supportTypeSelector","supportTypeMetaElements","querySelectorAll","supportTypeMetaElementsDone","some","catch","console","warn","updateBrowserSupport","supportFile","polyfill","polyfills","polyfillChain","loadScriptsSequentially","metaElement","querySelector","find","srcs","VamtigerBrowserSupport","baseUrl","es2015Support","slash","build","head","firstChild","document","createElement","meta","vamtigerBrowserSupportScript","vamtigerBrowserSupportScriptPaths","baseUrlPaths","slice","baseUrlPath","match","setAttribute","insertBefore","supportDataKey","_c","support","scriptUrl","name","toLowerCase","appendChild","sort","setBrowserSupportMetaElement","objectAssignNotSupported","arrayFromNotSupported","destructringAssignmentNotSupported","arrowFunctionsNotSupported","legacy","undefined","objectAssign","arrayFrom","destructringAssignment","arrowFunctions","results","every","_b","eval","handleError","Error","message","parse","loadLegacyDependencies","loadDependencies","isLegacy","urlsGroups","loadDependency","vamtigerBrowserMethodJsonJs","dependencies","loadVamtigerBrowserMethod","currentSrc","vamtigerBrowserSupportScriptParentPath","existingScript","addEventListener","removeChild","vamtigerBrowserMethodJson","jsonText","innerHTML","js","text","vamtigerBrowserMethodScript","stack","userAgent","navigator","Boolean","ontouchstart","documentElement","maxTouchPoints","msMaxTouchPoints","touchSupport","isBot","textMode","handleLoad","event","removeEventListener","setMetaElement","setBrowserSupportMetaElements","setBrowserData","notBrowser"],"mappings":"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"}